{
  "S3Bucket": {
    "Type": "AWS::S3::Bucket",
    "Properties": {
      "BucketName": "inmobiliaria-zicatela-frontend",
      "PublicAccessBlockConfiguration": {
        "BlockPublicAcls": false,
        "BlockPublicPolicy": false,
        "IgnorePublicAcls": false,
        "RestrictPublicBuckets": false
      },
      "WebsiteConfiguration": {
        "IndexDocument": "index.html",
        "ErrorDocument": "404.html"
      }
    }
  },
  "S3BucketPolicy": {
    "Type": "AWS::S3::BucketPolicy",
    "Properties": {
      "Bucket": { "Ref": "S3Bucket" },
      "PolicyDocument": {
        "Version": "2012-10-17",
        "Statement": [
          {
            "Sid": "PublicReadGetObject",
            "Effect": "Allow",
            "Principal": "*",
            "Action": "s3:GetObject",
            "Resource": { "Fn::Sub": "${S3Bucket}/*" }
          }
        ]
      }
    }
  },
  "CloudFrontDistribution": {
    "Type": "AWS::CloudFront::Distribution",
    "Properties": {
      "DistributionConfig": {
        "Origins": [
          {
            "Id": "S3Origin",
            "DomainName": { "Fn::GetAtt": ["S3Bucket", "RegionalDomainName"] },
            "S3OriginConfig": {
              "OriginAccessIdentity": ""
            }
          }
        ],
        "Enabled": true,
        "DefaultRootObject": "index.html",
        "DefaultCacheBehavior": {
          "TargetOriginId": "S3Origin",
          "ViewerProtocolPolicy": "redirect-to-https",
          "Compress": true,
          "CachePolicyId": "4135ea2d-6df8-44a3-9df3-4b5a9be2c96b"
        },
        "CustomErrorResponses": [
          {
            "ErrorCode": "404",
            "ResponseCode": "200",
            "ResponsePagePath": "/index.html"
          }
        ]
      }
    }
  }
}
